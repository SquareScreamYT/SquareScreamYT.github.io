<html><head><meta charset="utf-8"><title>musi poka ko</title><style>@font-face{font-family:'Pixel Sans';src:url(https://raw.githubusercontent.com/SquareScreamYT/sq-render/main/pixel_sans.ttf) format('truetype')}body,html{width:100%;height:100%;margin:0}body{font-family:'Pixel Sans';background-color:#000;color:#fff;padding-top:20px}h1{padding:10px}canvas{margin-top:100px;border:1px solid #fff;position:absolute;left:50%;transform:translate(-50%,0)}.button-container{position:absolute;left:50%;transform:translate(-50%,10px);display:flex;gap:10px;margin-top:10px}button{font-family:'Pixel Sans';font-size:18px;padding:10px;cursor:pointer;background:#333;color:#fff;border:2px solid #fff}button.active{background:#666}</style><script>var behaviors={DL_DR:0,L_R:1,WALL:2},elements={sand:{name:"sand",color:"#ffff80",behavior:behaviors.DL_DR},water:{name:"water",color:"#8080ff",behavior:behaviors.L_R},wall:{name:"wall",color:"#808080",behavior:behaviors.WALL},eraser:{name:"eraser",color:"#000000",behavior:behaviors.WALL}};currentPixels=[];class Pixel{constructor(e,o,t){this.x=e,this.y=o,this.element=t,this.color=colorVariation(elements[t].color,20),pixelMap[e][o]=this}}function createPixelSquare(e,o,t){for(let i=e-Math.floor(t/2);i<=e+Math.floor(t/2);i++)for(let n=o-Math.floor(t/2);n<=o+Math.floor(t/2);n++)isEmpty(i,n)&&currentPixels.push(new Pixel(i,n,currentElement))}function isEmpty(e,o){return!(o>height-1||o<1||e>width-1)&&!(e<1)&&void 0==pixelMap[e][o]}function movePixel(e,o,t){delete pixelMap[e.x][e.y],e.x=o,e.y=t,pixelMap[o][t]=e}function pixelTick(e){var o=elements[e.element],t=e.x,i=e.y;o.behavior==behaviors.DL_DR?isEmpty(t,i+1)?movePixel(e,t,i+1):1==Math.floor(2*Math.random())?isEmpty(t-1,i+1)?movePixel(e,t-1,i+1):isEmpty(t+1,i+1)&&movePixel(e,t+1,i+1):isEmpty(t+1,i+1)?movePixel(e,t+1,i+1):isEmpty(t-1,i+1)&&movePixel(e,t-1,i+1):o.behavior==behaviors.L_R&&(isEmpty(t,i+1)?movePixel(e,t,i+1):1==Math.floor(2*Math.random())?isEmpty(t-1,i)?movePixel(e,t-1,i):isEmpty(t+1,i)&&movePixel(e,t+1,i):isEmpty(t+1,i)?movePixel(e,t+1,i):isEmpty(t-1,i)&&movePixel(e,t-1,i))}function tick(){var e=document.getElementById("game"),o=e.getContext("2d");o.clearRect(0,0,e.width,e.height);for(var t=0;t<currentPixels.length;t++)pixelTick(pixel=currentPixels[t]),o.fillStyle=pixel.color,o.fillRect(5*pixel.x,5*pixel.y,5,5);mouseIsDown&&mouse1Action(null,mousePos.x,mousePos.y)}function mouseClick(e){mouseIsDown=!0,mouseMove(e)}function mouseUp(e){mouseIsDown=!1}function getMousePos(e,o){var t=e.getBoundingClientRect();return{x:Math.round((o.clientX-t.left)/pixelSize),y:Math.round((o.clientY-t.top)/pixelSize)}}function mouseMove(e){mouseIsDown&&mouse1Action(e)}function mouse1Action(e,o,t){if(void 0==o&&void 0==t){var i=document.getElementById("game");i.getContext("2d");var o=(mousePos=getMousePos(i,e)).x,t=mousePos.y}currentElement,createPixelSquare(o,t,2)}function colorVariation(e,o){let t=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),n=parseInt(e.slice(5,7),16);return t+=Math.floor(Math.random()*o)-o/2,i+=Math.floor(Math.random()*o)-o/2,n+=Math.floor(Math.random()*o)-o/2,t=Math.min(255,Math.max(0,t)),i=Math.min(255,Math.max(0,i)),n=Math.min(255,Math.max(0,n)),"#"+[t,i,n].map(e=>e.toString(16).padStart(2,"0")).join("")}function selectElement(e){currentElement=e,document.querySelectorAll(".button-container button").forEach(e=>{e.classList.remove("active")}),document.getElementById(`${e}-btn`).classList.add("active")}pixelSize=5,currentElement="sand",mouseIsDown=!1,window.setInterval(tick,15),document.onkeydown=function(e){87==e.keyCode?selectElement("water"):83==e.keyCode?selectElement("sand"):88==e.keyCode?selectElement("wall"):69==e.keyCode&&selectElement("eraser")},window.onload=function(){var e=document.getElementById("game"),o=e.getContext("2d"),t=10*Math.ceil(.9*window.innerWidth/10),i=10*Math.ceil(.675*window.innerHeight/10);t>800&&(t=800),i>600&&(i=600),o.canvas.width=t,o.canvas.height=i,width=Math.round(t/pixelSize)-1,height=Math.round(i/pixelSize)-1,pixelMap={};for(var n=0;n<width;n++)pixelMap[n]=[];e.addEventListener("mousedown",mouseClick),e.addEventListener("mouseup",mouseUp),e.addEventListener("mousemove",mouseMove),e.ontouchstart=function(e){return e.touches&&(e=e.touches[0]),!1}};</script></head><body><canvas id="game" width="800" height="600" oncontextmenu="return!1"></canvas><div class="button-container"><button onclick='selectElement("sand")' id="sand-btn">ko</button><button onclick='selectElement("water")' id="water-btn">telo</button><button onclick='selectElement("wall")' id="wall-btn">kiwen</button><button onclick='selectElement("eraser")' id="eraser-btn">o weka</button></div></body></html>
